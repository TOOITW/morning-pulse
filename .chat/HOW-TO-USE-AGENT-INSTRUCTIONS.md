# 📚 如何使用這些 Agent 指示

本資料夾包含 2 份針對 Agent 的完整指示文件，用於實現 T014 & T015 (URL 正規化與內容雜湊)

---

## 📁 檔案清單

### 1. `SDD-T014-T015-URL-Hash-Agent-Prompt.md` (完整版)
**適用對象**: 需要深度理解需求的 Agent / 複雜場景

**內容**:
- 完整的 Specification Driven Development 文檔
- 100+ 項詳細要求
- 7 個完整的驗收檢查清單
- 常見問題排除指南
- 效能基準要求

**何時使用**:
- Agent 需要理解任務的 "Why" 和 "How"
- 有複雜的邊界情況需要考慮
- 需要完整的測試覆蓋和驗收標準
- 團隊需要文件化的知識

**用法**:
```
將此檔案內容複製到 Claude 對話中，作為完整的任務規格說明
```

---

### 2. `AGENT-DIRECT-INSTRUCTIONS-T014-T015.md` (簡化版)
**適用對象**: 快速執行的 Agent / 直接開發

**內容**:
- 4 個主要步驟 (檢查現狀 → 實現 → 測試 → 驗證)
- 7 個新增函數的簡潔規格
- 30 個測試場景清單
- 20 項完成檢查清單
- 5 個關鍵提示

**何時使用**:
- Agent 已熟悉專案結構
- 需要快速開始開發
- 時間緊張，優先速度
- 更新已有代碼

**用法**:
```
將此檔案內容複製到 Claude 對話中，作為快速參考指示
```

---

## 🎯 建議使用流程

### 場景 1: 首次使用此 Agent (推薦)

```
Step 1: 使用 SDD 完整版
  → 分享 `SDD-T014-T015-URL-Hash-Agent-Prompt.md`
  → Agent 理解完整需求與背景

Step 2: Agent 提問澄清
  → 根據 SDD 文檔中的 "常見問題" 回答
  → 或查看檔案中的 "特殊注意事項"

Step 3: Agent 開始實現
  → 按照 "執行流程" 的 3 個步驟進行
  → 每個步驟完成後確認

Step 4: 驗證交付
  → 使用 "驗收清單" 逐項檢查
  → 執行 "成功指標" 中的所有命令
```

### 場景 2: 後續快速迭代 (新 Task)

```
Step 1: 簡化版指示
  → 分享 `AGENT-DIRECT-INSTRUCTIONS-T014-T015.md`
  → Agent 快速理解要做什麼

Step 2: Agent 執行
  → 按照 4 個步驟進行
  → 遇到問題時查詢簡化版中的 "提示與注意事項"

Step 3: 驗證
  → 執行 "最終檢查" 中的命令
```

### 場景 3: Agent 需要詳細參考 (開發中)

```
Step 1: 保持完整版 SDD 在對話中
  → 當遇到不確定的設計決策時參考
  → 查詢 Part 1-3 的詳細規格
  → 參考 "效能驗收" 的基準

Step 2: 參考測試用例
  → 在編寫測試時查看 "單元測試" 的清單
  → 確保覆蓋所有 18+30 個場景
```

---

## 💡 如何給 Agent 指示

### 方法 1: 直接複製文本 (推薦)

```
You: 
我想要你實現 MorningPulse 的 T014 & T015 (URL 正規化和內容雜湊)。

以下是完整的任務規格 (SDD 文檔):

[複製整個 SDD 文檔內容到這裡]

然後執行所有的步驟，最後確認所有測試通過。
```

### 方法 2: 分段給指示

```
You: 
讀取 `/Users/chenyuan.chang/Workspace/morning-pulse/.chat/AGENT-DIRECT-INSTRUCTIONS-T014-T015.md`

然後按照其中的 4 個步驟進行實現。

遇到問題時參考同資料夾的完整 SDD 文檔。
```

### 方法 3: 互動方式

```
You:
我有一個 SDD 風格的任務要給你。
讓我先給你總結：

T014 & T015: 實現 URL 正規化和內容雜湊功能
- 需要增強 2 個現有檔案
- 編寫 30+ 個測試用例
- 預期 2-3 小時完成

你準備好了嗎？

Agent: 
準備好！請告訴我詳細需求。

You:
[複製簡化版指示或完整版 SDD]
```

---

## ✅ 驗收 Agent 的交付物

### 快速檢查

```bash
# 1. 檢查檔案是否都被修改/創建
ls -la apps/web/src/lib/utils/url.ts          # modified ✓
ls -la apps/web/src/lib/utils/hash.ts         # modified ✓
ls -la apps/web/src/lib/utils/__tests__/url.test.ts   # new ✓
ls -la apps/web/src/lib/utils/__tests__/hash.test.ts  # new ✓

# 2. 執行測試
npm run test -- --testPathPattern="(url|hash)" --coverage

# 3. 檢查品質
npm run lint && npm run typecheck

# 4. 集成測試
npm run seed:sources && npm run ingest:rss
```

### 深度檢查

查看 SDD 或簡化版中的 "驗收清單" / "完成檢查清單"，逐項確認：

- ✅ 功能實現 (7 項)
- ✅ 測試覆蓋 (18+12 個測試用例)
- ✅ 程式碼品質 (4 項檢查)
- ✅ 集成測試 (3 項)
- ✅ 交付物 (4 個檔案)

如果全部 ✅，任務完成！

---

## 📊 預期時間線

| 階段 | 預期時間 | 開始時間 | 完成時間 |
|------|---------|---------|---------|
| Step 1: 檢查現狀 | 5 分鐘 | - | - |
| Step 2: 增強實現 | 60-90 分鐘 | - | - |
| Step 3: 編寫測試 | 30-40 分鐘 | - | - |
| Step 4: 驗證測試 | 20-30 分鐘 | - | - |
| **總計** | **2-3 小時** | - | - |

---

## 🔍 文檔版本

| 版本 | 日期 | 變更 |
|------|------|------|
| 1.0 | 2025-11-17 | 初版發布，包含 SDD 完整版和簡化版 |

---

## 📞 常見問題

**Q: 我應該用哪個版本？**  
A: 第一次用完整版 SDD，之後用簡化版加快速度。

**Q: 如果 Agent 卡住了怎麼辦？**  
A: 
1. 查看 SDD 中的 "常見問題 & 故障排除"
2. 查看簡化版中的 "提示與注意事項"
3. 檢查 "特殊注意事項" (HTTP redirect, IDN 轉換等)

**Q: 我可以分成多個對話完成嗎？**  
A: 可以，但建議在同一對話中完成 (2-3 小時)。如果分割，每個新對話開始時重新分享相關 SDD 片段。

**Q: 測試寫得不夠完整怎麼辦？**  
A: 查看簡化版中 "3.1 & 3.2" 的 18+12 個測試場景清單，補齊缺失的測試。

**Q: Agent 交付了代碼但測試失敗？**  
A: 
1. 檢查是否所有 18+12 個測試場景都被覆蓋
2. 驗證覆蓋率是否 ≥95%
3. 確認 npm run lint/typecheck 無錯誤
4. 回到 Agent，指出具體失敗的測試，要求修正

---

## 🎁 其他相關文檔

此資料夾中還有：

- `project-analysis-2024-11-14.md` - 完整的 MorningPulse 專案分析
- `MVP-Assessment-2025-11-17.md` - MVP 可行性評估報告

這些文檔可供背景參考，但不是 Agent 需要的執行指示。

---

## 🚀 下一步

完成 T014 & T015 後，可以繼續：

- **T016-T018**: RSS 適配器實現 (需要新的 SDD 指示)
- **T021-T023**: Job Queue 系統 (需要新的 SDD 指示)
- **T027-T033**: 去重與摘要算法 (需要新的 SDD 指示)

每個階段都可以使用相同的 SDD 方法論重複。

---

## 📝 編輯與維護

如果需要更新這些指示：

1. 保留文檔版本號
2. 更新 "文檔版本" 表格
3. 說明變更內容
4. 重新分享給 Agent

---

**祝編碼愉快！** 🎉
